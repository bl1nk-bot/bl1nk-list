  # ğŸ—ï¸ BOOKMARK APP - TECHNICAL ARCHITECTURE

  **Document Version:** 1.0  
  **Last Updated:** February 2026  
  **Status:** Active Development

  ---

  ## ğŸ“‘ Table of Contents

  1. [Architecture Overview](#architecture-overview)
  2. [System Architecture](#system-architecture)
  3. [Backend Architecture](#backend-architecture)
  4. [Frontend Architecture](#frontend-architecture)
  5. [Database Architecture](#database-architecture)
  6. [Sync Architecture](#sync-architecture)
  7. [Security Architecture](#security-architecture)
  8. [Deployment Architecture](#deployment-architecture)
  9. [Scalability](#scalability)
  10. [Disaster Recovery](#disaster-recovery)

  ---

  ## 1. Architecture Overview

  ### 1.1 High-Level System Architecture

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                    Cloudflare (CDN/DNS)                         â”‚
  â”‚                  bookmark.bl1nk.site                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                                â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Static Assets      â”‚        â”‚   API Requests         â”‚
       â”‚   (Vercel CDN)       â”‚        â”‚   (Vercel Functions)   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                        â”‚                                â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Web App      â”‚      â”‚  Backend API â”‚  â”‚   Workers    â”‚      â”‚  Monitoring  â”‚
  â”‚   (React)      â”‚      â”‚  (Node.js)   â”‚  â”‚  (Cloudflare)â”‚      â”‚  (Sentry)    â”‚
  â”‚   Vercel       â”‚      â”‚  Vercel      â”‚  â”‚  Background  â”‚      â”‚  Error Track â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  Jobs        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                      â”‚                      â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
  â”‚  PostgreSQL    â”‚  â”‚  Redis Cache   â”‚  â”‚  File Storage    â”‚
  â”‚  (NeonDB)      â”‚  â”‚  (Upstash)     â”‚  â”‚  (Backups)       â”‚
  â”‚  Primary DB    â”‚  â”‚  Session/Sync  â”‚  â”‚  Exports/Logs    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ### 1.2 Architecture Principles

  **Microservices-Ready**
  - Modular design with clear separation of concerns
  - Independent scaling per service
  - Stateless API functions

  **Local-First**
  - Client owns all bookmark data
  - Server is optional infrastructure
  - Works perfectly offline
  - User has full control

  **Scalable**
  - Horizontal scaling via Vercel Functions
  - Stateless services
  - Distributed caching with Redis
  - Connection pooling for database

  **Resilient**
  - Graceful degradation
  - Comprehensive error handling
  - Fallback mechanisms
  - Retry logic for failed syncs

  **Observable**
  - Comprehensive logging
  - Performance monitoring
  - Error tracking with Sentry
  - Metrics collection

  ---

  ## 2. System Architecture

  ### 2.1 Component Diagram

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                      CLIENT LAYER                                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
  â”‚  â”‚  Web App    â”‚  â”‚ Desktop App  â”‚  â”‚ Mobile App   â”‚            â”‚
  â”‚  â”‚  (React)    â”‚  â”‚  (Tauri)     â”‚  â”‚ (Flutter)    â”‚            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
  â”‚         â”‚                â”‚                 â”‚                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”             â”‚
  â”‚  â”‚    SyncCoordinator (Shared Logic)              â”‚             â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚
  â”‚  â”‚  â”‚ SyncEngine â”‚ SyncService â”‚ Storage Mgr â”‚   â”‚             â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
  â”‚         â”‚                                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
  â”‚  â”‚  Local Storage (Bookmarks, Tags)     â”‚                       â”‚
  â”‚  â”‚  - IndexedDB (Web)                   â”‚                       â”‚
  â”‚  â”‚  - SQLite (Desktop)                  â”‚                       â”‚
  â”‚  â”‚  - Hive (Mobile)                     â”‚                       â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
  â”‚                                                                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/HTTPS
                            â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                   API LAYER (Server)                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚         API Gateway (Vercel Functions)                   â”‚   â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
  â”‚  â”‚  â”‚  Auth    â”‚  â”‚  Sync    â”‚  â”‚ Devices  â”‚              â”‚   â”‚
  â”‚  â”‚  â”‚Endpoints â”‚  â”‚Endpoints â”‚  â”‚Endpoints â”‚              â”‚   â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                            â”‚                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚         Business Logic Layer                            â”‚   â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
  â”‚  â”‚  â”‚  Auth    â”‚  â”‚  Sync    â”‚  â”‚ Device   â”‚             â”‚   â”‚
  â”‚  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚             â”‚   â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                            â”‚                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚      Data Access Layer (Prisma ORM)                     â”‚   â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
  â”‚  â”‚  â”‚ User DAO â”‚  â”‚Session DAOâ”‚  â”‚Device DAOâ”‚             â”‚   â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                            â”‚                                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                    DATA LAYER                                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  â”‚  â”‚ PostgreSQL   â”‚  â”‚ Redis Cache  â”‚  â”‚ File Storage â”‚        â”‚
  â”‚  â”‚ (NeonDB)     â”‚  â”‚ (Upstash)    â”‚  â”‚ (Backups)    â”‚        â”‚
  â”‚  â”‚ - Users      â”‚  â”‚ - Sessions   â”‚  â”‚ - Exports    â”‚        â”‚
  â”‚  â”‚ - Sessions   â”‚  â”‚ - Sync Meta  â”‚  â”‚ - Logs       â”‚        â”‚
  â”‚  â”‚ - Devices    â”‚  â”‚ - Metadata   â”‚  â”‚              â”‚        â”‚
  â”‚  â”‚ - Sync Meta  â”‚  â”‚              â”‚  â”‚              â”‚        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
  â”‚                                                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ### 2.2 Data Flow Diagram

  ```
  User Action (Desktop)
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Local Storage Update â”‚
  â”‚ (Create/Edit/Delete) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Change Tracking     â”‚
  â”‚  (SyncEngine)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Auto-Sync (30s)     â”‚
  â”‚  SyncCoordinator     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚
      â–¼             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ PUSH   â”‚   â”‚ PULL   â”‚
  â”‚ PHASE  â”‚   â”‚ PHASE  â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚            â”‚
      â–¼            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Server Processing     â”‚
  â”‚  - Validate            â”‚
  â”‚  - Increment Version   â”‚
  â”‚  - Store in DB         â”‚
  â”‚  - Cache in Redis      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚          â”‚
      â–¼          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Merge Phase (Desktop)  â”‚
  â”‚  - Apply changes        â”‚
  â”‚  - Detect conflicts     â”‚
  â”‚  - Resolve conflicts    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Update Local Storage   â”‚
  â”‚  - Persist changes      â”‚
  â”‚  - Update UI            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Notify Other Devices   â”‚
  â”‚  - Mobile pulls changes â”‚
  â”‚  - Web pulls changes    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Sync Complete          â”‚
  â”‚  All devices consistent â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ---

  ## 3. Backend Architecture

  ### 3.1 Backend Stack

  ```
  Runtime:        Node.js 18+
  Framework:      Express.js (Vercel Functions)
  Language:       TypeScript 5.0+
  ORM:            Prisma 5.7+
  Validation:     Zod 3.22+
  Authentication: JWT + bcryptjs
  Caching:        Upstash Redis
  Database:       PostgreSQL (NeonDB)
  Deployment:     Vercel Serverless Functions
  Monitoring:     Sentry + Vercel Analytics
  ```

  ### 3.2 API Layer Architecture

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              API Gateway (Vercel Functions)                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚           Middleware Stack                            â”‚ â”‚
  â”‚  â”‚  1. CORS Handler                                      â”‚ â”‚
  â”‚  â”‚  2. Rate Limiter (Upstash)                            â”‚ â”‚
  â”‚  â”‚  3. Request Logger                                    â”‚ â”‚
  â”‚  â”‚  4. Auth Middleware (JWT Verification)               â”‚ â”‚
  â”‚  â”‚  5. Error Handler (Global)                            â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                            â”‚                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚         Route Handlers (Controllers)                  â”‚ â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
  â”‚  â”‚  â”‚ /api/auth/* â”‚  â”‚ /api/sync/* â”‚                    â”‚ â”‚
  â”‚  â”‚  â”‚ /api/device*â”‚  â”‚ /api/user/* â”‚                    â”‚ â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                            â”‚                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      Business Logic Layer (Services)                  â”‚ â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
  â”‚  â”‚  â”‚AuthService  â”‚  â”‚SyncService  â”‚                    â”‚ â”‚
  â”‚  â”‚  â”‚DeviceServiceâ”‚  â”‚UserService  â”‚                    â”‚ â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                            â”‚                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚    Data Access Layer (Prisma ORM)                     â”‚ â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
  â”‚  â”‚  â”‚ User Model  â”‚  â”‚Device Model â”‚                    â”‚ â”‚
  â”‚  â”‚  â”‚Session Modelâ”‚  â”‚SyncMeta Modelâ”‚                   â”‚ â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                            â”‚                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚PostgreSQL (NeonDB)       â”‚Redis (Upstash)    â”‚
       â”‚Primary Database  â”‚        â”‚Cache Layer        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ### 3.3 API Endpoints Structure

  ```
  /api/
  â”œâ”€â”€ /auth/
  â”‚   â”œâ”€â”€ POST   /register          (Create account)
  â”‚   â”œâ”€â”€ POST   /login             (User login)
  â”‚   â”œâ”€â”€ POST   /refresh           (Refresh token)
  â”‚   â”œâ”€â”€ GET    /me                (Get current user)
  â”‚   â””â”€â”€ POST   /logout            (Logout)
  â”‚
  â”œâ”€â”€ /sync/
  â”‚   â”œâ”€â”€ POST   /push              (Push changes)
  â”‚   â”œâ”€â”€ POST   /pull              (Pull changes)
  â”‚   â””â”€â”€ GET    /status            (Get sync status)
  â”‚
  â”œâ”€â”€ /devices/
  â”‚   â”œâ”€â”€ POST   /register          (Register device)
  â”‚   â”œâ”€â”€ GET    /                  (List devices)
  â”‚   â””â”€â”€ DELETE /:id               (Delete device)
  â”‚
  â”œâ”€â”€ /user/
  â”‚   â”œâ”€â”€ GET    /profile           (Get profile)
  â”‚   â”œâ”€â”€ PUT    /profile           (Update profile)
  â”‚   â”œâ”€â”€ GET    /settings          (Get settings)
  â”‚   â”œâ”€â”€ PUT    /settings          (Update settings)
  â”‚   â”œâ”€â”€ POST   /export            (Export bookmarks)
  â”‚   â””â”€â”€ POST   /import            (Import bookmarks)
  â”‚
  â””â”€â”€ /health
      â””â”€â”€ GET    /                  (Health check)
  ```

  ### 3.4 Service Layer Architecture

  **AuthService**
  - User registration and validation
  - Password hashing and verification
  - JWT token generation and validation
  - OAuth integration (GitHub, Google)
  - Session management

  **SyncService**
  - Change validation and processing
  - Version management
  - Conflict detection and resolution
  - Sync metadata updates
  - Device coordination

  **DeviceService**
  - Device registration
  - Device fingerprinting
  - Device list management
  - Device removal and cleanup

  **UserService**
  - User profile management
  - Settings management
  - Data export/import
  - Account deletion

  ---

  ## 4. Frontend Architecture

  ### 4.1 Web Frontend Stack

  ```
  Framework:      React 18.2+
  Build Tool:     Vite 5.0+
  Language:       TypeScript 5.0+
  State:          Zustand 4.4+
  HTTP Client:    Axios 1.6+
  Styling:        Tailwind CSS 3.3+
  UI Components:  shadcn/ui
  Testing:        Vitest 1.0+
  Deployment:     Vercel
  ```

  ### 4.2 Web App Architecture

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              React Application                       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚          Pages (Route Components)              â”‚ â”‚
  â”‚  â”‚  â”œâ”€ LoginPage                                  â”‚ â”‚
  â”‚  â”‚  â”œâ”€ RegisterPage                               â”‚ â”‚
  â”‚  â”‚  â”œâ”€ DashboardPage                              â”‚ â”‚
  â”‚  â”‚  â”œâ”€ BookmarksPage                              â”‚ â”‚
  â”‚  â”‚  â”œâ”€ SettingsPage                               â”‚ â”‚
  â”‚  â”‚  â””â”€ SyncStatusPage                             â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                      â”‚                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      Components (UI Components)                 â”‚ â”‚
  â”‚  â”‚  â”œâ”€ BookmarkCard                                â”‚ â”‚
  â”‚  â”‚  â”œâ”€ BookmarkList                                â”‚ â”‚
  â”‚  â”‚  â”œâ”€ BookmarkForm                                â”‚ â”‚
  â”‚  â”‚  â”œâ”€ TagList                                     â”‚ â”‚
  â”‚  â”‚  â”œâ”€ SearchBox                                   â”‚ â”‚
  â”‚  â”‚  â””â”€ SyncIndicator                               â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                      â”‚                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      State Management (Zustand)                 â”‚ â”‚
  â”‚  â”‚  â”œâ”€ authStore                                   â”‚ â”‚
  â”‚  â”‚  â”œâ”€ bookmarkStore                               â”‚ â”‚
  â”‚  â”‚  â”œâ”€ syncStore                                   â”‚ â”‚
  â”‚  â”‚  â””â”€ uiStore                                     â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                      â”‚                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      Hooks (Custom Hooks)                       â”‚ â”‚
  â”‚  â”‚  â”œâ”€ useAuth()                                   â”‚ â”‚
  â”‚  â”‚  â”œâ”€ useBookmarks()                              â”‚ â”‚
  â”‚  â”‚  â”œâ”€ useSync()                                   â”‚ â”‚
  â”‚  â”‚  â””â”€ useLocalStorage()                           â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                      â”‚                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      Services (API & Sync)                      â”‚ â”‚
  â”‚  â”‚  â”œâ”€ apiClient (Axios)                           â”‚ â”‚
  â”‚  â”‚  â”œâ”€ SyncCoordinator                             â”‚ â”‚
  â”‚  â”‚  â”œâ”€ StorageManager                              â”‚ â”‚
  â”‚  â”‚  â””â”€ SyncEngine                                  â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                      â”‚                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚      Local Storage (IndexedDB)                  â”‚ â”‚
  â”‚  â”‚  â”œâ”€ bookmarks                                   â”‚ â”‚
  â”‚  â”‚  â”œâ”€ tags                                        â”‚ â”‚
  â”‚  â”‚  â”œâ”€ notes                                       â”‚ â”‚
  â”‚  â”‚  â””â”€ syncState                                   â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                                                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ### 4.3 Desktop App (Tauri) Architecture

  ```
  Frontend (React + TypeScript)
         â”‚
         â”œâ”€ Same as Web App
         â”œâ”€ Additional Tauri Commands
         â””â”€ System Integration
  
  Tauri Bridge
         â”‚
         â”œâ”€ Invoke Commands
         â”œâ”€ Event System
         â””â”€ File System Access
  
  Backend (Rust)
         â”‚
         â”œâ”€ Window Management
         â”œâ”€ File I/O
         â”œâ”€ System Tray
         â”œâ”€ Keyboard Shortcuts
         â””â”€ Notifications
  
  Local Storage (SQLite)
         â”‚
         â”œâ”€ Bookmarks
         â”œâ”€ Tags
         â”œâ”€ Notes
         â””â”€ Sync State
  ```

  ### 4.4 Mobile App (Flutter) Architecture

  ```
  UI Layer (Flutter Widgets)
         â”‚
         â”œâ”€ LoginScreen
         â”œâ”€ BookmarksScreen
         â”œâ”€ BookmarkDetailScreen
         â”œâ”€ SettingsScreen
         â””â”€ SyncStatusScreen
  
  State Management (Provider)
         â”‚
         â”œâ”€ AuthProvider
         â”œâ”€ BookmarkProvider
         â”œâ”€ SyncProvider
         â””â”€ UIProvider
  
  Services Layer
         â”‚
         â”œâ”€ ApiService (Dio)
         â”œâ”€ SyncService
         â”œâ”€ StorageService
         â””â”€ NotificationService
  
  Local Storage (Hive)
         â”‚
         â”œâ”€ Bookmarks
         â”œâ”€ Tags
         â”œâ”€ Notes
         â””â”€ Sync State
  ```

  ---

  ## 5. Database Architecture

  ### 5.1 Database Schema

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              PostgreSQL (NeonDB)                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Users Table                                  â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ email (UNIQUE)                            â”‚  â”‚
  â”‚  â”‚ â”œâ”€ username (UNIQUE)                         â”‚  â”‚
  â”‚  â”‚ â”œâ”€ passwordHash                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ displayName                               â”‚  â”‚
  â”‚  â”‚ â”œâ”€ avatarUrl                                 â”‚  â”‚
  â”‚  â”‚ â”œâ”€ theme                                     â”‚  â”‚
  â”‚  â”‚ â”œâ”€ language                                  â”‚  â”‚
  â”‚  â”‚ â””â”€ timestamps                                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Sessions Table                               â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userId (FK â†’ Users)                       â”‚  â”‚
  â”‚  â”‚ â”œâ”€ token (UNIQUE)                            â”‚  â”‚
  â”‚  â”‚ â”œâ”€ refreshToken (UNIQUE)                     â”‚  â”‚
  â”‚  â”‚ â”œâ”€ expiresAt                                 â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userAgent                                 â”‚  â”‚
  â”‚  â”‚ â”œâ”€ ipAddress                                 â”‚  â”‚
  â”‚  â”‚ â””â”€ timestamps                                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Devices Table                                â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userId (FK â†’ Users)                       â”‚  â”‚
  â”‚  â”‚ â”œâ”€ name                                      â”‚  â”‚
  â”‚  â”‚ â”œâ”€ type (desktop/mobile/web/extension)       â”‚  â”‚
  â”‚  â”‚ â”œâ”€ platform (macos/windows/linux/ios/android)â”‚  â”‚
  â”‚  â”‚ â”œâ”€ deviceFingerprint (UNIQUE)                â”‚  â”‚
  â”‚  â”‚ â”œâ”€ lastSyncedAt                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ lastSyncVersion                           â”‚  â”‚
  â”‚  â”‚ â””â”€ timestamps                                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ SyncMetadata Table                           â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userId (FK â†’ Users)                       â”‚  â”‚
  â”‚  â”‚ â”œâ”€ clientId                                  â”‚  â”‚
  â”‚  â”‚ â”œâ”€ currentVersion                            â”‚  â”‚
  â”‚  â”‚ â”œâ”€ clientLastVersion                         â”‚  â”‚
  â”‚  â”‚ â”œâ”€ lastSyncedAt                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ clientLastSyncAt                          â”‚  â”‚
  â”‚  â”‚ â”œâ”€ lastSyncSnapshot (JSON)                   â”‚  â”‚
  â”‚  â”‚ â””â”€ timestamps                                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ UserSettings Table                           â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userId (FK â†’ Users, UNIQUE)               â”‚  â”‚
  â”‚  â”‚ â”œâ”€ autoSync                                  â”‚  â”‚
  â”‚  â”‚ â”œâ”€ syncInterval                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ notifyOnSync                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ notifyOnConflict                          â”‚  â”‚
  â”‚  â”‚ â”œâ”€ isPublicProfile                           â”‚  â”‚
  â”‚  â”‚ â”œâ”€ maxStorageGB                              â”‚  â”‚
  â”‚  â”‚ â”œâ”€ customSettings (JSON)                     â”‚  â”‚
  â”‚  â”‚ â””â”€ timestamps                                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ SyncLog Table                                â”‚  â”‚
  â”‚  â”‚ â”œâ”€ id (PK)                                   â”‚  â”‚
  â”‚  â”‚ â”œâ”€ userId (FK â†’ Users)                       â”‚  â”‚
  â”‚  â”‚ â”œâ”€ deviceId                                  â”‚  â”‚
  â”‚  â”‚ â”œâ”€ action (push/pull/conflict)               â”‚  â”‚
  â”‚  â”‚ â”œâ”€ status (pending/completed/failed)         â”‚  â”‚
  â”‚  â”‚ â”œâ”€ itemsCount                                â”‚  â”‚
  â”‚  â”‚ â”œâ”€ conflictsCount                            â”‚  â”‚
  â”‚  â”‚ â”œâ”€ errorMessage                              â”‚  â”‚
  â”‚  â”‚ â””â”€ createdAt                                 â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

  ### 5.2 Database Indexes

  ```sql
  -- User Indexes
  CREATE INDEX idx_user_email ON users(email);
  CREATE INDEX idx_user_username ON users(username);
  CREATE INDEX idx_user_github_id ON users(github_id);

  -- Session Indexes
  CREATE INDEX idx_session_user_id ON sessions(user_id);
  CREATE INDEX idx_session_token ON sessions(token);
  CREATE INDEX idx_session_refresh_token ON sessions(refresh_token);
  CREATE INDEX idx_session_expires_at ON sessions(expires_at);

  -- Device Indexes
  CREATE INDEX idx_device_user_id ON devices(user_id);
  CREATE INDEX idx_device_fingerprint ON devices(device_fingerprint);
  CREATE INDEX idx_device_last_synced ON devices(last_synced_at);

  -- SyncMetadata Indexes
  CREATE INDEX idx_sync_metadata_user_id ON sync_metadata(user_id);
  CREATE INDEX idx_sync_metadata_client_id ON sync_metadata(client_id);
  CREATE UNIQUE INDEX idx_sync_metadata_user_client ON sync_metadata(user_id, client_id);

  -- SyncLog Indexes
  CREATE INDEX idx_sync_log_user_id ON sync_logs(user_id);
  CREATE INDEX idx_sync_log_status ON sync_logs(status);
  CREATE INDEX idx_sync_log_created_at ON sync_logs(created_at);
  ```

  ### 5.3 Redis Cache Strategy

  ```
  Cache Keys:
  
  session:{token}
    - TTL: 15 minutes
    - Data: User ID, email, username
  
  sync_status:{userId}
    - TTL: 1 hour
    - Data: Current version, last sync time, devices
  
  user_settings:{userId}
    - TTL: 1 hour
    - Data: Theme, language, sync interval
  
  device_list:{userId}
    - TTL: 30 minutes
    - Data: List of user's devices
  
  sync_metadata:{userId}:{clientId}
    - TTL: 1 hour
    - Data: Sync version, last sync time
  ```

  ---

  ## 6. Sync Architecture

  ### 6.1 Sync Flow Diagram

  ```
  Client 1 (Desktop)
         â”‚
         â”œâ”€ Create/Edit/Delete Bookmark
         â”‚
         â”œâ”€ Track Change in SyncEngine
         â”‚  { action: 'create', type: 'bookmark', data: {...} }
         â”‚
         â”œâ”€ Queue in pendingChanges
         â”‚
         â”œâ”€ Auto-Sync Trigger (30s)
         â”‚
         â”œâ”€ PUSH PHASE
         â”‚  â”œâ”€ Send changes to server
         â”‚  â”œâ”€ Server validates
         â”‚  â”œâ”€ Server increments version
         â”‚  â”œâ”€ Server stores in DB
         â”‚  â”œâ”€ Server caches in Redis
         â”‚  â””â”€ Return new version
         â”‚
         â”œâ”€ PULL PHASE
         â”‚  â”œâ”€ Request changes from server
         â”‚  â”œâ”€ Get changes from other devices
         â”‚  â”œâ”€ Receive new server version
         â”‚  â””â”€ Return changes
         â”‚
         â”œâ”€ MERGE PHASE
         â”‚  â”œâ”€ Apply remote changes
         â”‚  â”œâ”€ Detect conflicts
         â”‚  â”œâ”€ Resolve conflicts (auto/manual)
         â”‚  â””â”€ Update local storage
         â”‚
         â””â”€ NOTIFY PHASE
            â”œâ”€ Other devices pull changes
            â”œâ”€ Other devices merge changes
            â””â”€ All devices consistent
  ```

  ### 6.2 Conflict Resolution Strategy

  ```
  Conflict Detection:
  - Same bookmark modified on 2+ devices
  - Detected by version mismatch
  - Timestamp comparison
  
  Resolution Strategies:
  1. Last-Write-Wins (Default)
     - Server timestamp wins
     - Automatic resolution
     - No user intervention
  
  2. Manual Resolution
     - Show both versions
     - User selects preferred version
     - User can preview differences
  
  3. Merge (Future)
     - Combine changes
     - Intelligent merging
     - Preserve all data
  
  Conflict UI:
  - Notification alert
  - Show both versions side-by-side
  - Highlight differences
  - User selects resolution
  - Confirm and sync
  ```

  ### 6.3 Sync State Machine

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   IDLE      â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Auto-sync trigger (30s) or manual sync
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  SYNCING    â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ PUSH PHASE
         â”‚  â”œâ”€ Validate changes
         â”‚  â”œâ”€ Send to server
         â”‚  â””â”€ Wait for response
         â”‚
         â”œâ”€ PULL PHASE
         â”‚  â”œâ”€ Request changes
         â”‚  â””â”€ Receive changes
         â”‚
         â”œâ”€ MERGE PHASE
         â”‚  â”œâ”€ Apply changes
         â”‚  â”œâ”€ Detect conflicts
         â”‚  â””â”€ Resolve conflicts
         â”‚
         â”œâ”€ PERSIST PHASE
         â”‚  â”œâ”€ Update local storage
         â”‚  â”œâ”€ Clear pending changes
         â”‚  â””â”€ Update UI
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   SYNCED    â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Error or new changes
         â”‚
         â”œâ”€ ERROR â†’ IDLE (retry)
         â”‚
         â””â”€ NEW CHANGES â†’ SYNCING
  ```

  ---

  ## 7. Security Architecture

  ### 7.1 Authentication Flow

  ```
  User Registration:
  1. User enters email, password, username
  2. Validate input (email format, password strength)
  3. Check if email/username already exists
  4. Hash password with bcryptjs (10 rounds)
  5. Create user in database
  6. Generate JWT access token
  7. Generate refresh token
  8. Return tokens to client
  9. Client stores tokens securely
  
  User Login:
  1. User enters email, password
  2. Find user by email
  3. Compare password with hash
  4. If match:
     - Generate JWT access token (15 min)
     - Generate refresh token (7 days)
     - Create session in database
     - Cache session in Redis
     - Return tokens to client
  5. If no match:
     - Return 401 Unauthorized
  
  Token Refresh:
  1. Client sends refresh token
  2. Verify refresh token signature
  3. Check if token exists in database
  4. Generate new access token
  5. Update session in database
  6. Cache new session in Redis
  7. Return new access token
  
  Logout:
  1. Client sends logout request with token
  2. Delete session from database
  3. Delete session from Redis cache
  4. Return success
  ```

  ### 7.2 JWT Token Structure

  ```
  Access Token (15 minutes):
  {
    "iss": "bookmark-app",
    "sub": "user-id",
    "email": "user@example.com",
    "username": "username",
    "iat": 1676246400,
    "exp": 1676247300
  }
  
  Refresh Token (7 days):
  {
    "iss": "bookmark-app",
    "sub": "user-id",
    "type": "refresh",
    "iat": 1676246400,
    "exp": 1676851200
  }
  ```

  ### 7.3 Security Headers

  ```
  CORS:
  - Allow Origins: bookmark.bl1nk.site, api.bookmark.bl1nk.site
  - Allow Methods: GET, POST, PUT, DELETE, OPTIONS
  - Allow Headers: Content-Type, Authorization
  - Allow Credentials: true
  
  Security Headers:
  - X-Content-Type-Options: nosniff
  - X-Frame-Options: DENY
  - X-XSS-Protection: 1; mode=block
  - Strict-Transport-Security: max-age=31536000
  - Content-Security-Policy: default-src 'self'
  
  Rate Limiting:
  - /api/auth/login: 5 requests per 15 minutes
  - /api/auth/register: 3 requests per 1 hour
  - /api/sync/push: 100 requests per 1 minute
  - /api/sync/pull: 100 requests per 1 minute
  ```

  ### 7.4 Data Encryption

  ```
  In Transit:
  - HTTPS/TLS 1.3+
  - All API calls encrypted
  - Certificate pinning (mobile apps)
  
  At Rest:
  - Database encryption (NeonDB)
  - Sensitive fields encrypted
  - Passwords hashed with bcryptjs
  
  Local Storage:
  - Device-level encryption (OS)
  - Web: IndexedDB (browser sandbox)
  - Desktop: SQLite encrypted
  - Mobile: Hive encrypted
  ```

  ---

  ## 8. Deployment Architecture

  ### 8.1 Deployment Environments

  ```
  Development (localhost)
  â”œâ”€ Frontend: http://localhost:5173
  â”œâ”€ Backend: http://localhost:3000
  â”œâ”€ Database: Local PostgreSQL
  â””â”€ Cache: Local Redis

  Staging (staging.bookmark.bl1nk.site)
  â”œâ”€ Frontend: Vercel
  â”œâ”€ Backend: Vercel Functions
  â”œâ”€ Database: NeonDB (staging)
  â””â”€ Cache: Upstash Redis (staging)

  Production (bookmark.bl1nk.site)
  â”œâ”€ Frontend: Vercel (Global CDN)
  â”œâ”€ Backend: Vercel Functions (Global)
  â”œâ”€ Database: NeonDB (US-East)
  â””â”€ Cache: Upstash Redis (Global)
  ```

  ### 8.2 CI/CD Pipeline

  ```
  Git Push â†’ GitHub
         â”‚
         â–¼
  GitHub Actions
         â”‚
         â”œâ”€ Run Tests
         â”‚  â”œâ”€ Unit tests
         â”‚  â”œâ”€ Integration tests
         â”‚  â””â”€ E2E tests
         â”‚
         â”œâ”€ Lint & Format
         â”‚  â”œâ”€ ESLint
         â”‚  â”œâ”€ Prettier
         â”‚  â””â”€ TypeScript check
         â”‚
         â”œâ”€ Build
         â”‚  â”œâ”€ Backend build
         â”‚  â”œâ”€ Frontend build
         â”‚  â””â”€ Desktop build
         â”‚
         â”œâ”€ Deploy to Staging
         â”‚  â”œâ”€ Deploy backend
         â”‚  â”œâ”€ Deploy frontend
         â”‚  â””â”€ Run smoke tests
         â”‚
         â””â”€ Deploy to Production
            â”œâ”€ Approval required
            â”œâ”€ Deploy backend
            â”œâ”€ Deploy frontend
            â””â”€ Monitor metrics
  ```

  ### 8.3 Vercel Deployment Configuration

  ```
  vercel.json:
  {
    "version": 2,
    "env": [
      "DATABASE_URL",
      "REDIS_URL",
      "JWT_SECRET",
      "JWT_REFRESH_SECRET"
    ],
    "functions": {
      "api/**/*.ts": {
        "memory": 512,
        "maxDuration": 10
      }
    },
    "routes": [
      {
        "src": "/api/auth/(.*)",
        "dest": "/api/auth/$1.ts"
      },
      {
        "src": "/api/sync/(.*)",
        "dest": "/api/sync/$1.ts"
      },
      {
        "src": "/api/devices/(.*)",
        "dest": "/api/devices/$1.ts"
      }
    ]
  }
  ```

  ---

  ## 9. Scalability

  ### 9.1 Horizontal Scaling

  ```
  Vercel Functions:
  - Auto-scales based on traffic
  - Stateless functions
  - Load balanced automatically
  - No manual scaling needed
  
  Database:
  - NeonDB auto-scaling
  - Connection pooling (Prisma)
  - Read replicas (future)
  - Sharding (future)
  
  Cache:
  - Upstash Redis auto-scaling
  - Global distribution
  - Automatic failover
  - Replication
  ```

  ### 9.2 Performance Optimization

  ```
  Frontend:
  - Code splitting
  - Lazy loading
  - Image optimization
  - CSS minification
  - JavaScript minification
  - Gzip compression
  
  Backend:
  - Database indexing
  - Redis caching
  - Query optimization
  - Connection pooling
  - Response compression
  
  Network:
  - CDN caching (Cloudflare)
  - HTTP/2 support
  - Gzip compression
  - Asset minification
  ```

  ### 9.3 Performance Targets

  ```
  Frontend:
  - Page load: < 2 seconds
  - Time to interactive: < 3 seconds
  - Largest contentful paint: < 2.5 seconds
  
  Backend:
  - API response: < 500ms
  - Database query: < 100ms
  - Sync latency: < 5 seconds
  
  Search:
  - Search response: < 100ms
  - Full-text search: < 200ms
  
  Sync:
  - Push latency: < 2 seconds
  - Pull latency: < 2 seconds
  - Merge latency: < 1 second
  ```

  ---

  ## 10. Disaster Recovery

  ### 10.1 Backup Strategy

  ```
  Database Backups:
  - Daily automated backups
  - 30-day retention
  - Geographic redundancy
  - Point-in-time recovery
  
  Application Backups:
  - Source code in GitHub
  - Infrastructure as Code
  - Configuration backups
  - Secrets management (Vercel)
  ```

  ### 10.2 Disaster Recovery Plan

  ```
  Database Failure:
  1. Detect failure (monitoring alerts)
  2. Failover to backup
  3. Restore from latest backup
  4. Verify data integrity
  5. Resume operations
  
  API Failure:
  1. Detect failure (health checks)
  2. Automatic rollback
  3. Deploy fix
  4. Verify functionality
  5. Resume operations
  
  Data Corruption:
  1. Detect corruption (validation)
  2. Restore from backup
  3. Verify integrity
  4. Investigate cause
  5. Implement safeguards
  ```

  ### 10.3 Monitoring & Alerting

  ```
  Monitoring Tools:
  - Vercel Analytics
  - Sentry (Error tracking)
  - Upstash Monitoring
  - NeonDB Monitoring
  
  Alerts:
  - High error rate (> 1%)
  - High latency (> 1s)
  - Database connection errors
  - Redis connection errors
  - Sync failures
  - Authentication failures
  
  Logging:
  - Vercel logs
  - Sentry logs
  - Application logs
  - Access logs
  - Error logs
  ```

  ---

  **Document End**

  *For questions or updates, please contact the architecture team.*
